(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{438:function(s,n,a){"use strict";a.r(n);var t=a(2),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一、项目的初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、项目的初始化"}},[s._v("#")]),s._v(" 一、项目的初始化")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("react项目初始化："),n("code",[s._v("npx create-react-app my-app --template Typescript")])])]),s._v(" "),n("li",[n("p",[s._v("vite项目初始化"),n("code",[s._v("yarn create vite")])])]),s._v(" "),n("li",[n("p",[s._v("Typescript监督，不要出现any")])])]),s._v(" "),n("h2",{attrs:{id:"二、jsx命名约定-与html之间的差异"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、jsx命名约定-与html之间的差异"}},[s._v("#")]),s._v(" 二、JSX命名约定（与HTML之间的差异）")]),s._v(" "),n("h3",{attrs:{id:"_1-classname-class"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-classname-class"}},[s._v("#")]),s._v(" 1. className = class")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<div className="style"></div>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-htmlfor代替for"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-htmlfor代替for"}},[s._v("#")]),s._v(" 2. htmlFor代替for")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<label htmlFor=“user”>用户名</label>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3-html属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-html属性"}},[s._v("#")]),s._v(" 3. HTML属性")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<div data-c="1"></div>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"三、jsx中的模块化css"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、jsx中的模块化css"}},[s._v("#")]),s._v(" 三、JSX中的模块化CSS")]),s._v(" "),n("p",[s._v("知识点：当使用某种scss样式引入的方式时，如果把scss引入当前局部component内，再将该component引入app.tsx后，该样式文件会影响到后续引入的component。所以这种引入是全局引入。")]),s._v(" "),n("p",[s._v("方法：")]),s._v(" "),n("ul",[n("li",[s._v("配置声明文件")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('declare module "*.css"{\n    const css:{[key:string]:string};\n    export default css;\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("修改命名为"),n("code",[s._v("XXX.module.css")]),s._v("引入")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import Appcss from './App.module.css'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"四、组件的结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、组件的结构"}},[s._v("#")]),s._v(" 四、组件的结构")]),s._v(" "),n("ol",[n("li",[s._v("组件的内部结构")])]),s._v(" "),n("p",[s._v("写一个interface props约定XXXProps接口。")]),s._v(" "),n("p",[s._v("在组件定义时，组件名称后方跟:React.FC"),n("XXXProps",[s._v("规定类型")])],1),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React from "react";\nimport rebot from \'./robot.module.css\'\n\ninterface RobotProps{\n id:number,\n name:string,\n email:string\n}\n\nconst Robot:React.FC<RobotProps>=({id,name,email})=>{\n   return (\n    <div className={rebot.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt="" />\n      <h2>{name}</h2>\n      <p>{email}</p>\n    </div>\n   )\n}\n\nexport default Robot;\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("组件的外部结构（树枝）")])]),s._v(" "),n("p",[s._v("src\n├── apis   // API呼叫方法（LoginApi.tsx, UserApi.tsx等）\n├── components //细拆组件\n├── interfaces // 接口文件定义\n├── locales // 国际化（但是画面适配很麻烦~）\n├── pages  // 最终的页面，在这里处理API呼叫、状态管理等。\n├── stories // storybook配置文件\n├── styles // 全局less样式\n├── templates // 画面的模板，一个完整的板块\n└── utils // 工具方法之类的")]),s._v(" "),n("p",[s._v("一个文件配上main file、test / stories / less\n单元：jest + react-testing-library\n自动：jest + playwright")]),s._v(" "),n("h2",{attrs:{id:"五、state和props介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、state和props介绍"}},[s._v("#")]),s._v(" 五、State和Props介绍")]),s._v(" "),n("p",[s._v("state只能在构造函数中进行初始化。")]),s._v(" "),n("p",[s._v("setState()是同步还是异步？")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// setState是异步更新,同步执行(class组件)\n  <button onClick={\n      ()=>{\n        this.setState({count:this.state.count+1},()=>{\n         // 初始值 1 点击一次\n\n         // 异步处理的结果\n          console.log("count",this.state.count);//结果： 2\n        })\n         // 同步结果(生命周期并没更新)\n        console.log("count",this.state.count); // 结果：1\n      }\n    }>+1</button>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("状态管理：")]),s._v(" "),n("ol",[n("li",[s._v("redux")]),s._v(" "),n("li",[s._v("localStorage,cookie（工具：jotai）")]),s._v(" "),n("li",[s._v("useContext")])]),s._v(" "),n("h2",{attrs:{id:"六、react的事件处理问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、react的事件处理问题"}},[s._v("#")]),s._v(" 六、react的事件处理问题")]),s._v(" "),n("h3",{attrs:{id:"_1-箭头函数实现this的指向性-class组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-箭头函数实现this的指向性-class组件"}},[s._v("#")]),s._v(" 1. 箭头函数实现this的指向性(class组件)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 如果react中的函数是一个无参数的函数(只要event),可以\n...\nclass Cart extends React.Component<Props, State>{\n constructor(props:Props){\n    super(props);\n    this.state={\n        isOpen:false\n    }\n }\n handleClick=()=>{\n    this.setState({isOpen:!this.state.isOpen})\n }\n render(): React.ReactNode {\n    ....\n     <button className={Cartcss.button} >购物车2(件)</button>\n }\n}\nexport default Cart;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h3",{attrs:{id:"_2-函数柯里化-class组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-函数柯里化-class组件"}},[s._v("#")]),s._v(" 2. 函数柯里化(class组件)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("...\nclass Cart extends React.Component<Props, State>{\n constructor(props:Props){\n    super(props);\n    this.state={\n        isOpen:false\n    }\n }\n  handleClick(){\n    this.setState({isOpen:!this.state.isOpen})\n }\n render(): React.ReactNode {\n     return (\n       ...\n            <button className={Cartcss.button} onClick={()=>this.handleClick()}>购物车2(件)</button>\n          ...\n     );\n }\n}\nexport default Cart;\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"_3-event对象-e"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-event对象-e"}},[s._v("#")]),s._v(" 3. event对象(e)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('  handleClick(e:React.MouseEvent<HTMLButtonElement, MouseEvent>){\n    // e.target事件发生的元素\n    console.log("e.target",e.target) // 点击的那部分\n    // e.currentTarget事件绑定的元素\n    console.log("e.currentTarget",e.currentTarget); // 绑定事件的那部分\n    if((e.target as HTMLElement).nodeName==="SPAN")\n        this.setState({isOpen:!this.state.isOpen})\n }\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("react组件（原生标签）传递事件处理程序，需要传参时")]),s._v(" "),n("ul",[n("li",[s._v("使用bind预传参\n"),n("button",{attrs:{onClick:"{this.handleClick.bind(this,id)}"}},[s._v("点击事件")])]),s._v(" "),n("li",[s._v("在箭头函数外部嵌套一层函数\n<button onClick={(e)=>this.handleClick(id,e)}>点击事件")])]),s._v(" "),n("h2",{attrs:{id:"七、函数式组件hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、函数式组件hooks"}},[s._v("#")]),s._v(" 七、函数式组件Hooks")]),s._v(" "),n("h3",{attrs:{id:"hooks钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooks钩子"}},[s._v("#")]),s._v(" hooks钩子")]),s._v(" "),n("p",[s._v("给无状态组件状态(函数式组件)消息处理的一种方法，用来监视指定程序。")]),s._v(" "),n("p",[s._v("函数式组件中处理副作用（useEffect）可以把外部代码钩进来。\nuseState\nuseEffect\nuseContext\nuseReducer：全局状态管理\nuseRef：返回引用对象\nuseCallback：回调的Effect")]),s._v(" "),n("h3",{attrs:{id:"usestate的基本使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usestate的基本使用"}},[s._v("#")]),s._v(" useState的基本使用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import {useState,FC} from 'React';\n\ninterface XXXProps{\n  id:XXX;\n  name:XXX;\n}\n\nconst APP:React.FC<XXXProps> = (XXXProps) => {\n  const {id,name} = XXXProps;\n  const [count,setCount] = useState(0);\n\n  return (\n    <>\n      <span>{count}</span>\n      <button onClick = {()=>setCount(count+1)}>点击增加+</button>\n    </>\n  );\n}\n\nexport default APP;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"useeffect的基本使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useeffect的基本使用"}},[s._v("#")]),s._v(" useEffect的基本使用")]),s._v(" "),n("ol",[n("li",[s._v("作为监听器使用：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import {useState,useEffect} from 'React';\n\ninterface XXXProps{\n  id:000;\n  name:'xxx';\n}\n\nconst APP:React.FC<XXXProps> = (props)=>{\n  const {\n    id,\n    name\n  } = props;\n  const [count,setCount] = useState<number>(1);\n  /**\n  * @function 执行的函数\n  * @deps 监听的参数\n  * 1. 参数为空， 每次都会执行，包括第一次；\n  * 2. 参数为数组包含状态，仅仅在本状态更新时执行；\n  * 3. 参数为空数组，相当于挂载，只会第一次执行。\n  */\n  useEffect(\n    ()=>{\n      document.title=`点击了${count}次`\n    },[count]\n  )\n\n  return (\n    <>\n      <span>{count}</span>\n      <button onClick = {()=>setState(count+1)}>点击增加+</button>\n    </>\n  )\n}\n\nexport default APP;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("发送网络请求（第二参数为空数组）：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import {useState, useEffect} from "React"\n\ninterface XXXProps{\n  id:XXX;\n  name:XXX;\n}\n\nconst APP:React.FC<XXXProps> = (props)=>{\n  const [robotGallery, setRobotGallery] = useState<Array<any>>([]);\n\n\n\n  // 开发模式下，且使用了严格模式下会触发两次\n  //相当于挂载，在生成模式下只会执行一次，如果第二参数为空就会无限循环\n  useEffect(()=>{\n    /* 普通的.then请求\n    fetch("网址").then(res=>res.json()).then(data=>setRobotGallery(data))\n    **/\n\n    // async和await模式\n    const fetchData = async ()=>{\n      const res = await fetch("网址");\n      const data = await res.json();\n      setRobotGallery(data);\n    }\n    fetchData();\n  },[])\n\n\n  return (\n    <div className={styles.robotList}>\n      {robotGallery.map((item)=><Robot {...item} key={item.id}/>)}\n    </div>\n  )\n}\n\nexport default APP;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("h3",{attrs:{id:"usecontext的基本使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecontext的基本使用"}},[s._v("#")]),s._v(" useContext的基本使用")]),s._v(" "),n("p",[s._v("父组件注入(????)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 默认context\nconst defaultContextValue{\n  author:'qql'\n}\n\n// 上下文关系\nexport const appContext=React.createContext(defaultContextValue);\n\nReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(\n  <React.StrictMode>\n    {/* 注入属性 */}\n    <appContext.Provider value={defaultContextValue}>\n      <App/>\n    </appContext.Provider>\n  </React.StrictMode>\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("子组件消费")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import React from \"react\";\nimport rebot from './robot.module.css'\n// 引入上下文关系消费\nimport {appContext} from '../../main'\n\nconst Robot:React.FC<RobotProps>=()=>{\n   return <appContext.Consumer>\n      {\n         (value)=>\n         <p>作者:{value.author}</p>\n      }\n   </appContext.Consumer>\n}\n\nexport default Robot;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("使用useContext消费")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React, { useContext } from "react";\nimport rebot from "./robot.module.css";\n// 引入上下文关系消费\nimport { appContext } from "../../main";\n\nconst Robot: React.FC<RobotProps> = ({ id, name, email }) => {\n  const value = useContext(appContext);\n\n  return (\n      <p>作者:{value.author}</p>\n  );\n};\n\nexport default Robot;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("使用依赖注入实现全局状态管理")]),s._v(" "),n("p",[s._v("定义全局状态管理组件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React, { useState } from "react";\n\ninterface AppStateValue {\n  author: string;\n  shoppingCart: { items: { id: number; name: string }[] };\n}\ninterface Props {\n  children: any;\n}\n\n// 默认context\nconst defaultContextValue: AppStateValue = {\n  author: "qql",\n  shoppingCart: { items: [] },\n};\n// 上下文关系\nexport const appContext = React.createContext(defaultContextValue);\n// 修改上下文\nexport const appSetStateContext = React.createContext<\n  React.Dispatch<React.SetStateAction<AppStateValue>> | undefined\n>(undefined);\n\nconst AppStateProvider: React.FC<Props> = (props) => {\n  const [state, setState] = useState(defaultContextValue);\n  return (\n    // 注入setState\n    <appContext.Provider value={state}>\n      {/* 修改state */}\n      <appSetStateContext.Provider value={setState}>\n        {/* props.children相当默认插槽 */}\n        {props.children}\n      </appSetStateContext.Provider>\n    </appContext.Provider>\n  );\n};\nexport default AppStateProvider;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("入口组件引入状态管理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React from "react";\nimport ReactDOM from "react-dom/client";\nimport App from "./App";\nimport AppStateProvider from "./Appstate";\n\nReactDOM.createRoot(document.getElementById("root") as HTMLElement).render(\n  <React.StrictMode>\n    {/* 注入属性 */}\n    <AppStateProvider>\n      <App />\n    </AppStateProvider>\n  </React.StrictMode>\n);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("物品组件中消费和修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React, { useContext } from "react";\nimport rebot from "./robot.module.css";\n// 引入上下文关系消费\nimport { appContext, appSetStateContext } from "../../Appstate";\n\ninterface RobotProps {\n  id: number;\n  name: string;\n  email: string;\n}\n\nconst Robot: React.FC<RobotProps> = ({ id, name, email }) => {\n  // 对象\n  const value = useContext(appContext);\n  // 函数\n  const setState = useContext(appSetStateContext);\n  // 加入购物车操作\n  const addCart = (id: number, name: string) => {\n    console.log(id, name);\n    if (setState) {\n      setState((state) => {\n        return {\n          ...state, // 不影响原来的值\n          shoppingCart: {\n            items: [...state.shoppingCart.items, { id, name }],\n          },\n        };\n      });\n    }\n  };\n  return (\n    <div className={rebot.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt="" />\n      <h2>{name}</h2>\n      <p>{email}</p>\n      <p>作者:{value.author}</p>\n      <button onClick={() => addCart(id, name)}>加入购物车</button>\n    </div>\n  );\n};\n\nexport default Robot;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h3",{attrs:{id:"自定义hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义hooks"}},[s._v("#")]),s._v(" 自定义Hooks")]),s._v(" "),n("ol",[n("li",[s._v("抽取添加购物车的逻辑写成hooks")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import {useContext} from 'react';\nimport {appSetStateContext} from '../Appstate';\n\nexport const useAddToCart = ()=>{\n\n  // 添加状态\n  const setState = useContext(appSetStateContext);\n\n  // 加入购物车的操作\n  const addCart = (id:number,name:string)={\n    if(!setState)return\n    setState((state)=>{\n      return {\n        ...state,  // 不影响原来的值\n        shoppingCart: {\n          item:[...state.shoppingCart.items,{id, name}],\n        }\n      }\n    })\n  }\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("使用hooks")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import React,{useContext} from 'React';\nimport rebot from './robot.module.css';\n// 引入上下文关系消费\nimport {appContext, appSetStateContext} from '../../Appstate';\n// 引入hooks\nimport {useAddToCart} from '../../hooks';\n\ninterface RobotProps{\n  id:number;\n  name:string;\n  email:string;\n}\n\nconst Robot:React.FC<RobotProps> = (props)=>{\n  const {id,name,email} = props;\n  // 获取对象\n  const value = useContext(appContext);\n  const addCart = useAddToCart();\n\n  return (\n    <div className={Rebot.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt=\"呱唧\">\n      <h2>打折商品</h2>\n      <h2>{name}</h2>\n      <p>{email}</p>\n      <p>作者：{value.author}</p>\n      <button onClick={()=>addCart(id,name)}>加入购物车</button>\n    </div>\n  )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h2",{attrs:{id:"八、高阶组件hoc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#八、高阶组件hoc"}},[s._v("#")]),s._v(" 八、高阶组件HOC")]),s._v(" "),n("ol",[n("li",[s._v("高阶组件HOC是一个返回组件的函数。")]),s._v(" "),n("li",[s._v("接收组件作为参数，返回一个经过改造的新组件。\n封装添加购物车的方法")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import { useContext } from "react";\nimport { appSetStateContext } from "../../Appstate";\nimport type { RobotProps } from "./Robot";\n\nexport const withAddToCart = (\n  ChildComponent: React.ComponentType<RobotProps>\n) => {\n  return (props: RobotProps) => {\n    // 函数\n    const setState = useContext(appSetStateContext);\n    // 加入购物车操作\n    const addCart = (id: number, name: string) => {\n      if (setState) {\n        setState((state) => {\n          return {\n            ...state, // 不影响原来的值\n            shoppingCart: {\n              items: [...state.shoppingCart.items, { id, name }],\n            },\n          };\n        });\n      }\n    };\n\n    return <ChildComponent {...props} addCart={addCart} />;\n  };\n};\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("使用HOC组件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import React, { useContext } from "react";\nimport rebot from "./robot.module.css";\n// 引入上下文关系消费\nimport { appContext, appSetStateContext } from "../../Appstate";\n// 引入高阶组件HOC\nimport { withAddToCart } from "./AddToCart";\n\nexport interface RobotProps {\n  id: number;\n  name: string;\n  email: string;\n  addCart: (id: number, name: string) => void;\n}\n\nconst Robot: React.FC<RobotProps> = ({ id, name, email, addCart }) => {\n  // 对象\n  const value = useContext(appContext);\n  return (\n    <div className={rebot.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt="" />\n      <h2>{name}</h2>\n      <p>{email}</p>\n      <p>作者:{value.author}</p>\n      <button onClick={() => addCart(id, name)}>加入购物车</button>\n    </div>\n  );\n};\n\nexport default withAddToCart(Robot);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"九、组件之间通讯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#九、组件之间通讯"}},[s._v("#")]),s._v(" 九、组件之间通讯")]),s._v(" "),n("p",[s._v("父传子props\n子传父(父向子传递一个函数props)\n默认插槽\n具名插槽\n跨级传输\n<appContext.Provider value={defaultContextValue}>\n<appContext.Consumer>")]),s._v(" "),n("h2",{attrs:{id:"十、typescript"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十、typescript"}},[s._v("#")]),s._v(" 十、typescript")]),s._v(" "),n("ol",[n("li",[s._v("泛型类型参数\n泛型类型参数是一种在定义函数、类或接口时使用的参数化类型机制。通过使用泛型类型参数，可以将特定类型的实例化推迟到使用这些类型的方法上。泛型类型参数不会影响程序的运行时行为，只是为了提供编译时类型安全性。")]),s._v(" "),n("li",[s._v("类型注解\n类型注解则是一种在代码中直接指定变量、函数参数、函数返回值等类型的方式。类型注解可以帮助程序员在编写代码时检测可能的类型错误，并且可以让代码更具可读性。与泛型类型参数不同，类型注解在程序运行时也会产生影响。")])]),s._v(" "),n("p",[s._v("const A：number = {}\n代表了A应该接收number类型的数据")]),s._v(" "),n("p",[s._v("type Props"),n("T",[s._v(" = {\ndata: T[];\n}")])],1),s._v(" "),n("p",[s._v("function MyComponent"),n("T",[s._v("(props: Props"),n("T",[s._v(") {\n// component implementation\n}")])],1)],1),s._v(" "),n("p",[s._v("这里的T代表函数foo可以接受T类型的参数，并返回相同的值。T在调用foo时进行具体指定。\nlet result = foo"),n("string",[s._v('("hello");')])],1),s._v(" "),n("p",[s._v("const APP:React.FC"),n("AppPropsInterface",[s._v(" = ({id,name,email}) =>{}")])],1),s._v(" "),n("ol",[n("li",[s._v("APP的返回值必须是react.fc类型的")]),s._v(" "),n("li",[s._v("APP的参数是{id,name,email}")]),s._v(" "),n("li",[s._v("APP的返回值（React.FC类型）的接口是AppPropsInterface规定的")])])])}),[],!1,null,null,null);n.default=e.exports}}]);